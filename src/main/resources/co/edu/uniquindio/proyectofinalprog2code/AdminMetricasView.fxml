<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<ScrollPane fitToWidth="true" style="-fx-background: linear-gradient(to bottom, #f5f7fa, #c3cfe2);" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="co.edu.uniquindio.proyectofinalprog2code.ViewController.AdminMetricasViewController">
    <content>
        <VBox spacing="25">
            <padding>
                <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
            </padding>

            <children>
                <!-- Header Section -->
                <VBox spacing="8" style="-fx-background-color: white; -fx-background-radius: 15; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 15, 0, 0, 3); -fx-padding: 20;">
                    <children>
                        <Label style="-fx-text-fill: #2c3e50;" text="ðŸ“Š Panel de MÃ©tricas">
                            <font>
                                <Font name="System Bold" size="32.0" />
                            </font>
                        </Label>
                        <Label style="-fx-text-fill: #7f8c8d;" text="Visualiza el rendimiento y estadÃ­sticas del sistema">
                            <font>
                                <Font size="14.0" />
                            </font>
                        </Label>
                    </children>
                </VBox>

                <!-- Cards Section: EstadÃ­sticas y Repartidores -->
                <HBox spacing="20">
                    <children>
                        <!-- Card: EstadÃ­sticas Generales -->
                        <VBox fx:id="panelEstadisticas" spacing="15" style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 25; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);" HBox.hgrow="ALWAYS">
                            <children>
                                <Label style="-fx-text-fill: #2c3e50;" text="ðŸ“ˆ EstadÃ­sticas Generales">
                                    <font>
                                        <Font name="System Bold" size="18.0" />
                                    </font>
                                </Label>

                                <Separator style="-fx-background-color: #3498db; -fx-pref-height: 2;" />

                                <!-- MÃ©tricas de EnvÃ­os -->
                                <VBox spacing="10" style="-fx-padding: 10 0 0 0;">
                                    <children>
                                        <Label fx:id="lblTotalEnvios" style="-fx-text-fill: #34495e; -fx-font-size: 14px; -fx-font-weight: bold;" text="Total EnvÃ­os: 0">
                                            <graphic>
                                                <Label style="-fx-font-size: 16px;" text="ðŸ“¦" />
                                            </graphic>
                                        </Label>

                                        <Label fx:id="lblEnviosEntregados" style="-fx-text-fill: #27ae60; -fx-font-size: 13px;" text="EnvÃ­os Entregados: 0">
                                            <graphic>
                                                <Label style="-fx-font-size: 14px;" text="âœ…" />
                                            </graphic>
                                        </Label>

                                        <Label fx:id="lblEnviosEnRuta" style="-fx-text-fill: #f39c12; -fx-font-size: 13px;" text="En Ruta: 0">
                                            <graphic>
                                                <Label style="-fx-font-size: 14px;" text="ðŸšš" />
                                            </graphic>
                                        </Label>

                                        <Label fx:id="lblEnviosSolicitados" style="-fx-text-fill: #3498db; -fx-font-size: 13px;" text="Solicitados: 0">
                                            <graphic>
                                                <Label style="-fx-font-size: 14px;" text="ðŸ“‹" />
                                            </graphic>
                                        </Label>
                                    </children>
                                </VBox>

                                <Separator style="-fx-background-color: #ecf0f1;" />

                                <!-- MÃ©tricas Financieras -->
                                <VBox spacing="10" style="-fx-background-color: #e8f8f5; -fx-background-radius: 8; -fx-padding: 15;">
                                    <children>
                                        <Label fx:id="lblIngresosTotales" style="-fx-text-fill: #16a085; -fx-font-weight: bold;" text="Ingresos Totales: $0.00">
                                            <font>
                                                <Font size="16.0" />
                                            </font>
                                        </Label>

                                        <Label fx:id="lblPromedioEnvio" style="-fx-text-fill: #16a085; -fx-font-size: 13px;" text="Promedio por EnvÃ­o: $0.00" />
                                    </children>
                                </VBox>
                            </children>
                        </VBox>

                        <!-- Card: Repartidores -->
                        <VBox fx:id="panelRepartidores" spacing="15" style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 25; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);" HBox.hgrow="ALWAYS">
                            <children>
                                <Label style="-fx-text-fill: #2c3e50;" text="ðŸ‘¥ Repartidores">
                                    <font>
                                        <Font name="System Bold" size="18.0" />
                                    </font>
                                </Label>

                                <Separator style="-fx-background-color: #9b59b6; -fx-pref-height: 2;" />

                                <VBox spacing="12" style="-fx-padding: 10 0 0 0;">
                                    <children>
                                        <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: #f8f9fa; -fx-background-radius: 8; -fx-padding: 12;">
                                            <children>
                                                <Label style="-fx-font-size: 20px;" text="ðŸ‘¤" />
                                                <VBox>
                                                    <children>
                                                        <Label style="-fx-text-fill: #7f8c8d; -fx-font-size: 11px;" text="Total Repartidores" />
                                                        <Label fx:id="lblTotalRepartidores" style="-fx-text-fill: #2c3e50; -fx-font-size: 24px; -fx-font-weight: bold;" text="0" />
                                                    </children>
                                                </VBox>
                                            </children>
                                        </HBox>

                                        <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: #d5f4e6; -fx-background-radius: 8; -fx-padding: 12;">
                                            <children>
                                                <Label style="-fx-font-size: 20px;" text="âœ…" />
                                                <VBox>
                                                    <children>
                                                        <Label style="-fx-text-fill: #27ae60; -fx-font-size: 11px; -fx-font-weight: bold;" text="Activos" />
                                                        <Label fx:id="lblActivos" style="-fx-text-fill: #27ae60; -fx-font-size: 20px; -fx-font-weight: bold;" text="0" />
                                                    </children>
                                                </VBox>
                                            </children>
                                        </HBox>

                                        <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: #fadbd8; -fx-background-radius: 8; -fx-padding: 12;">
                                            <children>
                                                <Label style="-fx-font-size: 20px;" text="âŒ" />
                                                <VBox>
                                                    <children>
                                                        <Label style="-fx-text-fill: #e74c3c; -fx-font-size: 11px; -fx-font-weight: bold;" text="Inactivos" />
                                                        <Label fx:id="lblInactivos" style="-fx-text-fill: #e74c3c; -fx-font-size: 20px; -fx-font-weight: bold;" text="0" />
                                                    </children>
                                                </VBox>
                                            </children>
                                        </HBox>

                                        <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: #fef5e7; -fx-background-radius: 8; -fx-padding: 12;">
                                            <children>
                                                <Label style="-fx-font-size: 20px;" text="ðŸšš" />
                                                <VBox>
                                                    <children>
                                                        <Label style="-fx-text-fill: #f39c12; -fx-font-size: 11px; -fx-font-weight: bold;" text="En Ruta" />
                                                        <Label fx:id="lblEnRuta" style="-fx-text-fill: #f39c12; -fx-font-size: 20px; -fx-font-weight: bold;" text="0" />
                                                    </children>
                                                </VBox>
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>
                            </children>
                        </VBox>
                    </children>
                </HBox>

                <!-- Card: DistribuciÃ³n por Estado -->
                <VBox spacing="15" style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 25; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
                    <children>
                        <Label style="-fx-text-fill: #2c3e50;" text="ðŸ”„ DistribuciÃ³n por Estado">
                            <font>
                                <Font name="System Bold" size="18.0" />
                            </font>
                        </Label>

                        <Separator style="-fx-background-color: #e67e22; -fx-pref-height: 2;" />

                        <HBox fx:id="panelDistribucion" spacing="15" style="-fx-padding: 10 0 0 0;">
                            <children>
                                <!-- Solicitados -->
                                <VBox spacing="8" style="-fx-background-color: #ebf5fb; -fx-background-radius: 10; -fx-padding: 15; -fx-alignment: center;" HBox.hgrow="ALWAYS">
                                    <children>
                                        <Label style="-fx-font-size: 28px;" text="ðŸ“‹" />
                                        <Label style="-fx-text-fill: #3498db; -fx-font-size: 12px; -fx-font-weight: bold;" text="Solicitados" />
                                        <Label fx:id="lblSolicitados" style="-fx-text-fill: #3498db; -fx-font-size: 24px; -fx-font-weight: bold;" text="0" />
                                    </children>
                                </VBox>

                                <!-- Asignados -->
                                <VBox spacing="8" style="-fx-background-color: #fef9e7; -fx-background-radius: 10; -fx-padding: 15; -fx-alignment: center;" HBox.hgrow="ALWAYS">
                                    <children>
                                        <Label style="-fx-font-size: 28px;" text="ðŸ“Œ" />
                                        <Label style="-fx-text-fill: #f1c40f; -fx-font-size: 12px; -fx-font-weight: bold;" text="Asignados" />
                                        <Label fx:id="lblAsignados" style="-fx-text-fill: #f1c40f; -fx-font-size: 24px; -fx-font-weight: bold;" text="0" />
                                    </children>
                                </VBox>

                                <!-- En Ruta -->
                                <VBox spacing="8" style="-fx-background-color: #fef5e7; -fx-background-radius: 10; -fx-padding: 15; -fx-alignment: center;" HBox.hgrow="ALWAYS">
                                    <children>
                                        <Label style="-fx-font-size: 28px;" text="ðŸšš" />
                                        <Label style="-fx-text-fill: #f39c12; -fx-font-size: 12px; -fx-font-weight: bold;" text="En Ruta" />
                                        <Label fx:id="lblEnRutaE" style="-fx-text-fill: #f39c12; -fx-font-size: 24px; -fx-font-weight: bold;" text="0" />
                                    </children>
                                </VBox>

                                <!-- Entregados -->
                                <VBox spacing="8" style="-fx-background-color: #eafaf1; -fx-background-radius: 10; -fx-padding: 15; -fx-alignment: center;" HBox.hgrow="ALWAYS">
                                    <children>
                                        <Label style="-fx-font-size: 28px;" text="âœ…" />
                                        <Label style="-fx-text-fill: #27ae60; -fx-font-size: 12px; -fx-font-weight: bold;" text="Entregados" />
                                        <Label fx:id="lblEntregados" style="-fx-text-fill: #27ae60; -fx-font-size: 24px; -fx-font-weight: bold;" text="0" />
                                    </children>
                                </VBox>

                                <!-- Incidencias -->
                                <VBox spacing="8" style="-fx-background-color: #fadbd8; -fx-background-radius: 10; -fx-padding: 15; -fx-alignment: center;" HBox.hgrow="ALWAYS">
                                    <children>
                                        <Label style="-fx-font-size: 28px;" text="âš " />
                                        <Label style="-fx-text-fill: #e74c3c; -fx-font-size: 12px; -fx-font-weight: bold;" text="Incidencias" />
                                        <Label fx:id="lblIncidencias" style="-fx-text-fill: #e74c3c; -fx-font-size: 24px; -fx-font-weight: bold;" text="0" />
                                    </children>
                                </VBox>
                            </children>
                        </HBox>
                    </children>
                </VBox>

                <!-- Action Button -->
                <HBox alignment="CENTER">
                    <children>
                        <Button onAction="#actualizarMetricas" prefHeight="50.0" prefWidth="250.0" style="-fx-background-color: linear-gradient(to bottom, #3498db, #2980b9); -fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold; -fx-background-radius: 12; -fx-cursor: hand; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.25), 12, 0, 0, 4);" text="ðŸ”„ Actualizar MÃ©tricas" />
                    </children>
                </HBox>
            </children>
        </VBox>
    </content>
</ScrollPane>
